<div class="zone pickup">
  <%= render partial: 'stack', locals: { position: Position.new(left: 5, top: 5),  card_stack: @pickup, spacing_x: 0.5, spacing_y: 0.5 } %>
  <%= render partial: 'stack', locals: { position: Position.new(left: 120, top: 15), card_stack: @discard, spacing_x: 12, spacing_y: 0 } %>

  <div style="position:absolute; left: 10px; top: 0px; height: 20px">
    <%= form_tag(:controller => :draw, :action => :create, :player_id => @player_id) do %>
        <%= button_tag(
                type: 'submit',
                name: 'pickup',
                value: 'pickup') do %>
            Draw
        <% end %>
    <% end # form %>

    <%= form_tag(:controller => :draw_discarded, :action => :create, :player_id => @player_id) do %>
        <% @discard.compact.each do |card| %>
            <%= button_tag(
                    type: 'submit',
                    name: 'draw',
                    value: card.value) do %>
                <%= card.value %>
            <% end %>
        <% end %>
    <% end # form %>

  </div>

</div>

<div class="zone players">
  <% @players.select{ |player| player != @round.selected_player }.each.with_index do |player, index| %>
    <%= render partial: 'player', locals: { position: Position.new(left: 10, top: 10 + index * 130), player: player } %>
    <%= render partial: 'stack', locals: { position: Position.new(left: 100, top: 10 + index * 130), card_stack: player.hand, spacing_x: 12, spacing_y: 0 } %>
    <%= render partial: 'melds', locals: { position: Position.new(left: player.hand.length * 24 + 10 + 90, top: 10 + index * 130), round: @round, player: player } %>
  <% end %>
</div>

<div class="zone user">
  <%= render partial: 'player', locals: { position: Position.new(left: 10, top: 10), player: @round.selected_player } %>
  <%= render partial: 'stack', locals: { position: Position.new(left: 100, bottom: 130), card_stack: @round.selected_player.hand, spacing_x: 12, spacing_y: 0 } %>
  <%= render partial: 'melds', locals: { position: Position.new(left: 100 + @round.selected_player.hand.length * 12 + 10 + 90, top: 10), round: @round, player: @round.selected_player } %>

  <div style="position: absolute; bottom: 0px; height: 40px; background-color: rgba(0, 100, 0, 0.5)">
    <%= form_tag(:controller => :discard, :action => :create, :player_id => @player_id) do %>
      <% @round.selected_player.hand.each do |card| %>
        <%= button_tag(
                type: 'submit',
                name: 'discard',
                value: card.value) do %>
            <%= card.value %>
          <% end %>
      <% end %>
    <% end # form %>

    <%= form_tag(:controller => :meld, :action => :create, :player_id => @player_id) do %>

      <% @round.selected_player.hand.each do |card| %>
          <%= check_box('cards', card.value, {:multiple => true}, card.value, nil) %><%= card.value %>
      <% end %>

      <%= button_tag(
              type: 'submit',
              name: 'meld',
              value: 'meld') do %>
          Meld
      <% end %>

    <% end # form %>
  </div>

</div>
